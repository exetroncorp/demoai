 mitmdump \
  --mode reverse:https://open-vsx.org \
  --listen-host 0.0.0.0 \
  --listen-port 6666 \
  --upstream-auth=toto:pass


-----------------------

# Complete nginx config for open-vsx.org mirror
# Save as: nginx.conf
# Run with: nginx -c /path/to/nginx.conf

worker_processes 1;
error_log /tmp/nginx_error.log;
pid /tmp/nginx.pid;

events {
    worker_connections 1024;
}

http {
    access_log /tmp/nginx_access.log;
    client_body_temp_path /tmp/nginx_client_body;
    proxy_temp_path /tmp/nginx_proxy;
    fastcgi_temp_path /tmp/nginx_fastcgi;
    uwsgi_temp_path /tmp/nginx_uwsgi;
    scgi_temp_path /tmp/nginx_scgi;

    server {
        listen 6666;
        server_name localhost;

        # Proxy all requests to open-vsx.org (or your Artifactory mirror)
        location / {
            proxy_pass https://open-vsx.org;
            proxy_ssl_server_name on;
            proxy_ssl_verify off;
            
            # Basic Auth for upstream server
            # Change these for your Artifactory mirror echo -n "username:password" | base64
            proxy_set_header Authorization "Basic dG90bzpwYXNz";  # base64(toto:pass)
            
            # Forward headers
            proxy_set_header Host open-vsx.org;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # Handle redirects
            proxy_redirect https://open-vsx.org/ http://$host:6666/;
            proxy_redirect http://open-vsx.org/ http://$host:6666/;
            
            # Timeouts
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }
    }
}
